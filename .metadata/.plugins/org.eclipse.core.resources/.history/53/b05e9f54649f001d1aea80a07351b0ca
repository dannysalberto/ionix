package com.ionix.testdev.services;

import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import com.ionix.testdev.dao.UserRepository;
import com.ionix.testdev.dto.UserDTO;
import com.ionix.testdev.interfaces.IUser;
import com.ionix.testdev.model.User;
import com.ionix.testdev.responses.UserResponse;
import com.ionix.testdev.utils.ConvertDTO;

@Service
public class UserService implements IUser{
	
	
	@Autowired
	UserRepository repo;
	
	@Autowired
	ConvertDTO convertDTO;

	@Override
	public User saveUser(UserDTO user) throws Exception {
		// TODO Auto-generated method stub
		User userToSave = User.builder()
				.email(user.getEmail())
				.name(user.getName())
				.phone(user.getPhone())
				.build();
		try {
			userToSave = repo.save(userToSave);
			return userToSave;
		}catch (Exception e) {
			// TODO: handle exception
			throw new Exception("Error al guardar");
		}
		
	}

	@Override
	@SuppressWarnings("unchecked")
	public List<UserResponse> listUsers() {
		// TODO Auto-generated method stub
		List<User> users = repo.findAll(); 
		return convertDTO.get(users, UserResponse.class);
	}

	@Override
	public User getUserByEmail(String email) {
		// TODO Auto-generated method stub
		return null;
	}

	@Override
	public boolean deleteUser(String id) {
		// TODO Auto-generated method stub
		return false;
	}

}
